!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const i=(e,t)=>{window.localStorage.setItem(e,JSON.stringify(t))},r=(e,t=null)=>null===t?document.getElementById(e):t.getElementById(e),l=(e,t)=>{if(null===e.match(/&list=/i)||!0===t){let t=e.match(/watch\?v=/i);return null===t?null:((e=e.split("")).splice(t.index,t[0].length,"embed/"),e=e.join(""))}{let t=l(e,!0),n=t.match(/&list=/i);return null===n?null:((t=t.split("")).splice(n.index,e.length),t=t.join(""))}},o=e=>{e.stopPropagation(),r("_text_redactor").classList.remove("low_opacity"),r("modal_window_container").classList.add("none"),r("content_in_modal").innerHTML=null},a=e=>{e.stopPropagation(),r("_text_redactor").classList.add("low_opacity"),r("modal_window_container").classList.remove("none"),r("close_modal").addEventListener("click",()=>{o(e)},{once:!0})},s=e=>document.createElement(e),c=()=>{r("copy").addEventListener("click",()=>{let e=r("enter_text").innerHTML,t=r("_text_redactor"),n=s("textarea");t.appendChild(n),n.value=(e=>{let t=s("div");t.innerHTML=e;let n=[...t.querySelectorAll(".rem")];return n=n.map(e=>(e.hasAttribute("id")&&e.removeAttribute("id"),e.hasAttribute("class")&&e.removeAttribute("class"),e)),t.innerHTML})(e),console.log(n.value),n.select(),document.execCommand("copy"),n.remove()})};let u={history:[],future:[],busked:[],settings:{max_size_history:105,bold:"strong",italic:"em",tint_color:"#04c981",feel_color:"#04c981"},text_value:"",clean:!0,errors:[]};const d=u,_=()=>{setTimeout((function(){u.text_value=r("enter_text").innerHTML,i("_Data",u)}),((e,t=0)=>Math.round(Math.random()*(e-t)+t))(1e3))},p=()=>{let e=(e=>JSON.parse(window.localStorage.getItem(e)))("_Data");null!=e&&(u=e,_(),r("enter_text").innerHTML=u.text_value,f())};class m{constructor(e,t,n){this.name=e,this.future_value=t,this.past_value=n}}const v=(e,{future_value:t,past_value:n})=>{u.busked.push(u.future),u.future=[],u.history.length>=u.settings.max_size_history&&(u.busked.push(u.history.splice(1,0)),console.log("max history lenght"));let i=new m(e,t,n);u.history.push(i),f(),_()},b=()=>u.settings,f=()=>{let e=r("top__bar"),t=e.querySelector(".do_container"),n=e.querySelector(".undo_container");u.history.length>0?(n.classList.remove("no_active"),r("undo_bttn").removeAttribute("disabled")):(n.classList.add("no_active"),r("undo_bttn").setAttribute("disabled","")),u.future.length>0?(t.classList.remove("no_active"),r("do_bttn").removeAttribute("disabled")):(t.classList.add("no_active"),r("do_bttn").setAttribute("disabled",""))},y=()=>{let e=u.history.pop();null==e?console.warn("event ===",e):(u.future.push(e),r("enter_text").innerHTML=e.past_value,f()),_()},g=()=>{let e=u.future.pop();null==e?console.warn("event ===",e):(u.history.push(e),r("enter_text").innerHTML=e.future_value,f()),_()},h=()=>{r("lorem_bttn").addEventListener("click",()=>{(()=>{let e=r("enter_text"),t=e.innerHTML;e.innerHTML+="Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eveniet consequatur commodi unde ut, corporis voluptatum assumenda, tenetur fugiat officia aliquam id voluptatibus error quaerat, optio iure culpa alias, vel doloremque!";let n={future_value:e.innerHTML,past_value:t};v("insert_lorem",n)})()})},L=()=>{r("video_bttn").addEventListener("click",e=>{e.stopPropagation();let t=r("content_in_modal"),n=document.createElement("span");n.innerHTML='<p>Введите ссылку на видео, которое хотите вставить</p>\n\t\t\t<input class=\'temp_input\' placeholder="url" type="text" />';let i=n.querySelector(".temp_input"),s=r("insert_modal");s.innerHTML="Вставить видео";const c=e=>{((e,t={type:"none"})=>{let n=r("enter_text");"none"===t.type?n.innerHTML+=e:"video"===t.type&&(n.innerHTML+=`<br /><br />${e}<br />`)})(`<iframe src="${e}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><span class="rem">&nbsp;</span><br />`,{type:"video"})};s.addEventListener("click",e=>{e.stopPropagation();let t=l(i.value);if(null===t)alert("Проверьте правильность написания ссылки!"),o(e);else{let n={past_value:r("enter_text").innerHTML};c(t),o(e),n.future_value=r("enter_text").innerHTML,v("insert_video",n)}},{once:!0}),t.appendChild(n),a(e)})},x=e=>{r("enter_text");if(""!==(()=>{let e="";return e=(e=window.getSelection)?window.getSelection().toString():document.selection.createRange().text})()){let t=(e=>{let t=b(),n=null,i={name:e},l=r("top__bar");t.tint_color=l.querySelector(".tint_value").value,t.feel_color=l.querySelector(".feel_value").value,"bold"===e?n=s(t.bold):"italic"===e?n=s(t.italic):"tint"===e?(n=s("span")).setAttribute("style",`color: ${t.tint_color}; position: relative; z-index: 1; background: transparent;`):"feel"===e&&(n=s("span")).setAttribute("style",`background: ${t.feel_color}; position: relative; z-index: 0;`);let o=r("enter_text").innerHTML,a=window.getSelection().getRangeAt(0),c=a.extractContents();n.appendChild(c),a.insertNode(n);let u=r("enter_text").innerHTML;return i.future_value=u,i.past_value=o,i})(e);v(t.name,t)}},M=()=>{r("settings_bttn").addEventListener("click",e=>{r("insert_modal");let t=s("span"),{bold:n,italic:l,max_size_history:c}=b(),p="",m="";if(p="em"===l?"i":"em",m="strong"===n?"b":"strong",null==c){(e=>{u.errors.push(e)})({name:"max_size_history error",old_value:c,seted_value:105}),c=105}t.innerHTML=`\n\t\t\t<span>Шагов истории сохранять:</span><br />\n\t\t\t<input type="number" class="max_size_history" title="Выберите сколько шагов истории сохранять.\nМаксимальное значение - 450" value="${c}" step="15" max="450" min="15" /><br /><br />\n\t\t\t<span title="Выберите тэг для курсива">Курсив</span><select class="settings_select italic">\n\t\t\t\t<option title="Тэг em предназначен для смыслового выделения текста и более симантически подходит под стандарт HTML5">${l}</option>\n\t\t\t\t<option title="Тэг i подходит для простого визуального выделения, не нагружая выделенное смысловой нагрузкой. Но всё-же мы рекомендуем использовать тэг em">${p}</option>\n\t\t\t</select><br />\n\t\t\t<span title="Выберите тэг для жирности">Жирность</span><select class="settings_select bold">\n\t\t\t\t<option title="Тэг strong предназначен для смыслового выделения текста и более симантически подходит под стандарт HTML5" selected>${n}</option>\n\t\t\t\t<option title="Тэг b подходит для простого визуального выделения, не нагружая выделенное смысловой нагрузкой. Но всё-же мы рекомендуем использовать тэг strong">${m}</option>\n\t\t\t</select>\n\t\t\t<button class="delete_data">Удалить сохранённые данные</button>\n\t\t`,r("content_in_modal").appendChild(t);let v=r("insert_modal");v.innerHTML="Сохранить",v.addEventListener("click",e=>{let t={max_size_history:document.querySelector(".max_size_history"),bold:document.querySelector(".bold"),italic:document.querySelector(".italic"),tint_color:document.querySelector(".tint_value"),feel_color:document.querySelector(".feel_value")},n={};for(let e in t)null!==t[e]?n[e]=t[e].value:console.warn(`selecttions.${e} === `,t[e]);(({bold:e,italic:t,max_size_history:n,tint_color:i,feel_color:r})=>{n>450?(u.settings.max_size_history=450,alert(`Слишком большое значение для сохранения шагов истории: ${n}\nПодставлено значение ${u.settings.max_size_history}`)):(u.settings.max_size_history=150,n<15&&alert(`Неправельные данные: значение минимального количества сохраняемых шагов истории должно быть больше 15!\nПодставлено значение ${u.settings.max_size_history}`),"number"==typeof+n&&+n>15&&+n<450?u.settings.max_size_history=n:alert(`Неправельные данные: значение максимального количества сохраняемых шагов истории должно быть числом!\nПодставлено значение ${u.settings.max_size_history}`)),u.settings.bold=e,u.settings.italic=t,u.settings.tint_color=i,u.settings.feel_color=r,_()})(n),o(e)},{once:!0}),t.querySelector(".delete_data").addEventListener("click",e=>{u.clean?(i("_Data",null),alert("Данные удалены!"),window.location.reload(),u=d,r("enter_text").innerHTML=null,f()):console.error("ОТКАЗАНО В ДОСТУПЕ!\nОбратитесь к администратору"),o(e)}),a(e)})},T=()=>{h(),c(),L(),r("undo_bttn").addEventListener("click",y),r("undo_bttn").removeAttribute("disabled"),r("do_bttn").addEventListener("click",g),r("do_bttn").removeAttribute("disabled"),r("bold_bttn").addEventListener("click",()=>{x("bold")}),(()=>{let e=r("enter_text"),t={past_value:""};e.addEventListener("input",()=>{t.future_value=e.innerHTML,v("change_text",t),t.past_value=e.innerHTML})})(),M(),r("italick_bttn").addEventListener("click",()=>{x("italic")}),r("tint_bttn").addEventListener("click",()=>{x("tint")}),r("feel_bttn").addEventListener("click",()=>{x("feel")})};var w=()=>{p(),T()};document.addEventListener("DOMContentLoaded",()=>{w()})}]);